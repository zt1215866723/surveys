/** layui-v2.5.4 MIT License By https://www.layui.com */ ;
layui.define(["table"], function(e) {
	"use strict";

	function a(e, t, i) {
		t = t || window, e = e.length ? e.get(0) : e;
		var n = {};
		if (i && t.top !== t.self) {
			var l = t.frames.frameElement;
			n = a(l, t.parent, i)
		}
		var o = e.getBoundingClientRect();
		return {
			top: o.top + (n.top || 0),
			left: o.left + (n.left || 0)
		}
	}
	var t = "2.0.0-preview1",
		i = "tablePlug",
		n = layui.cache.modules[i] || "",
		l = n.substr(0, n.lastIndexOf("/"));
	layui.link(l + "/tablePlug.css?v" + t), layui.link(l + "/icon/iconfont.css?v" + t);
	var o = layui.$,
		r = layui.laytpl,
		c = layui.laypage,
		s = layui.layer,
		d = layui.form,
		u = (layui.util, layui.table),
		f = layui.hint();
	layui.device();
	if (!d.render.plugFlag) {
		var y = d.render;
		d.render = function(e, a, t) {
			var i, n = this;
			return t ? layui.each(t, function(a, t) {
				t = o(t);
				var l = t.parent(),
					r = l.hasClass("layui-form"),
					c = l.attr("lay-filter");
				r ? "" : l.addClass("layui-form"), c ? "" : l.attr("lay-filter", "tablePlug_form_filter_temp_" + (new Date).getTime() +
					"_" + Math.floor(1e5 * Math.random())), i = y.call(n, e, l.attr("lay-filter")), r ? "" : l.removeClass(
					"layui-form"), c ? "" : l.attr("lay-filter", null)
			}) : i = y.call(n, e, a), i
		}, d.render.plugFlag = !0
	}
	layui.extend({
		optimizeSelectOption: "{/}" + l + "/optimizeSelectOption/optimizeSelectOption"
	}).use("optimizeSelectOption");
	var h, p = "2.5.4",
		g = (function() {
			return layui.device().ie && parseInt(layui.device().ie) < 9 && console.warn(
				"tablePlug插件暂时不支持ie9以下的ie浏览器，如果需要支持可自行调试，一般就是一些数组的方法ie8没有还有一个重要的就是window.parent这些支持不好，在getPosition的时候会死循环，如果有这方面相关的经验有处理方法请分享给俺，谢谢。"
			), !(!u.thisTable || !u.Class) || (console.error(
				"如果要使用该插件（tablePlug），参照readme.md的说明修改layui的table模块的代码，目前该组件是基于layui-V" + p,
				"https://gitee.com/sun_zoro/layuiTablePlug"), !1)
		}(), {
			version: t
		}),
		m = {},
		v = "additional",
		b = "removed",
		x = "original",
		k = "disabled",
		T = "layui-table-fixed-scroll",
		C = function(e, a, t, i) {
			var n = e.templet ? function() {
				return "function" == typeof e.templet ? e.templet(t) : r(o(e.templet).html() || String(a)).render(t)
			}() : a;
			return i ? o("<div>" + n + "</div>").text() : n
		},
		L = "layui-table-view",
		_ = ".layui-table-header",
		O = ".layui-table-body",
		w = ".layui-table-fixed",
		A = ".layui-table-fixed-l",
		S = ".layui-table-fixed-r",
		D = "layui-none",
		P = "layui-hide",
		N = "layui-table-click",
		B = "colGroup",
		j = ["numbers", "checkbox", "radio"],
		E = ['<span class="layui-table-filter layui-inline">',
			'<span class="layui-tablePlug-icon layui-tablePlug-icon-filter"></span>', "</span>"
		],
		I = function(e) {
			return u.thisTable.that[e]
		},
		F = function() {
			var e = {};
			return {
				check: function(a) {
					return !!e[a]
				},
				reset: function(a) {
					e[a] ? (this.set(a, v, []), this.set(a, b, [])) : (e[a] = {}, e[a][x] = [], e[a][v] = [], e[a][b] = [], e[a][k] = [])
				},
				init: function(e, a, t) {
					this.reset(e);
					var i = [];
					i = a && a.length && "object" == typeof a[0] ? z(e, a, t) : a, this.set(e, x, i)
				},
				disabled: function(a, t) {
					e[a] || this.reset(a), this.set(a, k, t)
				},
				checkDisabled: function(e, a) {
					return this.get(e, k).indexOf(a) !== -1
				},
				getChecked: function(e) {
					var a = this.get(e, b),
						t = this.get(e, x).concat(this.get(e, v)),
						i = [];
					return layui.each(t, function(e, t) {
						a.indexOf(t) === -1 && i.indexOf(t) === -1 && i.push(t)
					}), i
				},
				get: function(a, t) {
					return t === v || t === b || t === x || t === k ? e[a] ? e[a][t] || [] : [] : e[a]
				},
				set: function(a, t, i) {
					t !== x && t !== v && t !== b && t !== k || (e[a][t] = i && R(i) ? i : [])
				},
				update: function(a, t, i, n) {
					var l = e[a][x],
						o = e[a][v],
						r = e[a][b];
					i ? (n && o.splice(0, 1), l.indexOf(t) === -1 ? o.indexOf(t) === -1 && o.push(t) : n || r.indexOf(t) === -1 ||
						r.splice(r.indexOf(t), 1)) : l.indexOf(t) === -1 ? o.indexOf(t) !== -1 && o.splice(o.indexOf(t), 1) : r.indexOf(
						t) === -1 && r.push(t)
				}
			}
		}(),
		R = function(e) {
			return "[object Array]" === Object.prototype.toString.call(e)
		},
		M = function(e, a, t) {
			if (e && a && (t = t || Z(a), t && t.checkStatus))
				for (var i = F.getChecked(a), n = 0; n < e.length; n++) e[n][u.config.checkName] = i.indexOf(e[n][te(t)]) !== -1
		},
		H = function(e, a) {
			var t;
			if ("string" == typeof e ? t = Z(e) : (t = e.config, e = t ? t.id : ""), t) {
				var i = t.elem.next();
				a && (t.checkDisabled = t.checkDisabled || {}, t.checkDisabled.enabled = t.checkDisabled.enabled || !0, t.checkDisabled
						.data = F.get(e, k) || []), t.checkDisabled && t.checkDisabled.enabled ? layui.each(u.cache[e], function(a, n) {
						i.find(".layui-table-body").find('tr[data-index="' + a + '"]').find(
							'input[name="layTableCheckbox"],[lay-type="layTableRadio"]').prop("disabled", F.checkDisabled(e, n[te(t)]))
					}) : F.set(e, k, []), i.find('input[lay-filter="layTableAllChoose"]').prop("checked", u.checkStatus(e).isAll), d
					.render("checkbox", i.attr("lay-filter")), d.render("radio", i.attr("lay-filter"))
			}
		};
	g.set = function(e) {
		o.extend(!0, u.config, e || {})
	}, g.set({
		pageLanguageText: {
			en: {
				jumpTo: "jump to",
				page: "page",
				go: "go",
				total: "total",
				unit: "",
				optionText: "limit each page"
			}
		}
	}), u.Class.prototype.initTable = function() {
		var e = this;
		e.config;
		e.layFixed.find("tbody").html(""), e.layFixed.addClass(P), e.layTotal.addClass(P), e.layPage.addClass(P), e.layMain
			.find("tbody").html(""), e.layMain.find("." + D).remove(), e.layHeader.find('input[name="layTableCheckbox"]').prop(
				"checked", !1), e.renderForm("checkbox")
	};
	var Y = function(e, a) {
			if (e) {
				var t = I(e),
					i = t.config;
				"boolean" != typeof a && (a = !i.reversal), i.reversal = a, t.reverse(), t.resize()
			} else layui.each(u.thisTable.that, function(e, t) {
				Y(e, a)
			})
		},
		K = {},
		z = function(e, a, t) {
			var i = "string" == typeof e ? Z(e) : e;
			return t = t || te(i), i.checkStatus && t && (K[i.id] = K[i.id] || {}, layui.each(a || u.cache[i.id] || [],
				function(e, a) {
					K[i.id][a[t]] = a
				})), (a || u.cache[i.id] || []).map(function(e) {
				return e[t]
			})
		},
		W = function(e) {
			var a = this,
				t = a.config;
			e && (a.layBody.scrollTop(0), a.layBody.scrollLeft(0)), H(a), X.call(a), layui.each(a.tempData, function(e, t) {
				a.addTemp(e + 1, t, null, !0)
			}), t.reversal === !0 && a.reverse(), a.layBody.find('input[type="checkbox"][name="layTableCheckbox"]').attr(
				"lay-filter", "layTableCheckbox"), ue(a), z(t)
		};
	u.Class.prototype.errorView = function(e) {
		var a = this,
			t = a.layMain.find("." + D),
			i = o('<div class="' + D + '">' + (e || "Error") + "</div>");
		t[0] && (a.layNone.remove(), t.remove()), a.layFixed.addClass(P).find("tbody").html(""), a.layMain.find("tbody").html(
				""), a.layMain.append(a.layNone = i), a.layPage && a.layPage.addClass(P).find(">div").html(""), a.layTotal && a.layTotal
			.addClass(P).find("tbody").html(""), u.cache[a.key] = []
	}, u.Class.prototype.pullData = function(e, a) {
		var t = this,
			i = t.config,
			n = i.request,
			l = i.response,
			r = function() {
				"object" == typeof i.initSort && t.sort(i.initSort.field, i.initSort.type)
			};
		if (t.startTime = (new Date).getTime(), i.url) {
			var c = {};
			c[n.pageName] = e, c[n.limitName] = i.limit;
			var s = o.extend(c, i.where);
			"function" == typeof i.renderRequest && (s = i.renderRequest(s)), i.contentType && 0 == i.contentType.indexOf(
				"application/json") && (s = JSON.stringify(s)), t.loading(), o.ajax({
				type: i.method || "get",
				url: i.url,
				contentType: i.contentType,
				data: s,
				dataType: "json",
				headers: i.headers || {},
				success: function(n) {
					"function" == typeof i.parseData && (n = i.parseData(n) || n), n[l.statusName] != l.statusCode ? (t.renderForm(),
						t.errorView(n[l.msgName] || '返回的数据不符合规范，正确的成功状态码应为："' + l.statusName + '": ' + l.statusCode)) : (t.renderData(
							n, e, n[l.countName], !1, a && (!i.page || i.page.count === n[l.countName])), r(), i.time = (new Date).getTime() -
						t.startTime + " ms"), a ? t.loading(!0) : t.setColsWidth(), "function" == typeof i.done && i.done(n, e, n[
						l.countName])
				},
				error: function(e, i) {
					t.errorView("数据接口请求异常：" + i), t.renderForm(), a ? t.loading(!0) : t.setColsWidth()
				}
			})
		} else if (i.data && i.data.constructor === Array) {
			var d = {},
				u = e * i.limit - i.limit;
			d[l.dataName] = i.data.concat().splice(u, i.limit), d[l.countName] = i.data.length, t.renderData(d, e, d[l.countName],
					!1, a && (!i.page || i.page.count === i.data.length)), r(), a ? t.loading(!0) : t.setColsWidth(), "function" ==
				typeof i.done && i.done(d, e, d[l.countName])
		}
	}, u.Class.prototype.renderData = function(e, a, t, i, n) {
		var l = this,
			d = l.config,
			f = e[d.response.dataName] || [],
			y = [],
			h = [],
			p = [],
			g = function() {
				var e;
				return !i && l.sortKey ? l.sort(l.sortKey.field, l.sortKey.sort, !0) : (layui.each(f, function(t, n) {
						var c = [],
							s = [],
							f = [],
							g = t + d.limit * (a - 1) + 1;
						0 !== n.length && (i || (n[u.config.indexName] = t), l.eachCols(function(a, i) {
							var l = i.field || a,
								y = d.index + "-" + i.key,
								h = n[l];
							if (void 0 !== h && null !== h || (h = ""), !i.colGroup) {
								var p = ['<td data-field="' + l + '" data-key="' + y + '" ' + function() {
									var e = [];
									return i.edit && e.push('data-edit="' + i.edit + '"'), i.align && e.push('align="' + i.align + '"'),
										i.templet && e.push('data-content="' + h + '"'), i.event && e.push('lay-event="' + i.event + '"'),
										i.style && e.push('style="' + i.style + '"'), i.minWidth && e.push('data-minwidth="' + i.minWidth +
											'"'), e.join(" ")
								}() + ' class="' + function() {
									var e = [];
									return i.hide && e.push(P), i.field || e.push("layui-table-col-special"), e.join(" ")
								}() + '">', '<div class="layui-table-cell laytable-cell-' + function() {
									return "normal" === i.type ? y : y + " laytable-cell-" + i.type
								}() + '">' + function() {
									var a = o.extend(!0, {
											LAY_INDEX: g
										}, n),
										l = u.config.checkName;
									switch (i.type) {
										case "checkbox":
											return '<input type="checkbox" name="layTableCheckbox" lay-skin="primary" ' + function() {
												return i[l] ? (n[l] = i[l], i[l] ? "checked" : "") : a[l] ? "checked" : ""
											}() + ">";
										case "radio":
											return a[l] && (e = t), '<input type="radio" name="layTableRadio_' + d.index + '" ' + (a[l] ?
												"checked" : "") + ' lay-type="layTableRadio">';
										case "numbers":
											return g
									}
									return i.toolbar ? r(o(i.toolbar).html() || "").render(a) : C(i, h, a)
								}(), "</div></td>"].join("");
								c.push(p), i.fixed && "right" !== i.fixed && s.push(p), "right" === i.fixed && f.push(p)
							}
						}), y.push('<tr data-index="' + t + '">' + c.join("") + "</tr>"), h.push('<tr data-index="' + t + '">' + s
							.join("") + "</tr>"), p.push('<tr data-index="' + t + '">' + f.join("") + "</tr>"))
					}), n || l.layBody.scrollTop(0), l.layMain.find("." + D).remove(), l.layMain.find("tbody").html(y.join("")), l
					.layFixLeft.find("tbody").html(h.join("")), l.layFixRight.find("tbody").html(p.join("")), l.renderForm(),
					"number" == typeof e && l.setThisRowChecked(e), l.syncCheckAll(), l.haveInit ? l.scrollPatch() : setTimeout(
						function() {
							l.scrollPatch()
						}, 50), l.haveInit = !0, s.close(l.tipsIndex), d.HAS_SET_COLS_PATCH || l.setColsPatch(), void(d.HAS_SET_COLS_PATCH = !
						0))
			};
		M(f, d.id, d);
		var m = u.getTemp(l.key);
		return l.tempData = m.data, u.cache[l.key] = f, l.layPage[0 == t || 0 === f.length && 1 == a ? "addClass" :
			"removeClass"](P), 0 === f.length ? (l.renderForm(), l.errorView(d.text.none), W.call(l, !0)) : (l.layFixed.removeClass(
			P), i ? (g(), W.call(l)) : (g(), n ? W.call(l) : (l.renderTotal(f), l.layTotal && l.layTotal.removeClass(P), d.page &&
			(d.page = o.extend({
				elem: "layui-table-page" + d.index,
				count: t,
				limit: d.limit,
				limits: d.limits || [10, 20, 30, 40, 50, 60, 70, 80, 90],
				groups: 3,
				layout: ["prev", "page", "next", "skip", "count", "limit"],
				prev: '<i class="layui-icon">&#xe603;</i>',
				next: '<i class="layui-icon">&#xe602;</i>',
				jump: function(e, a) {
					if (a || (l.page = e.curr, d.limit = e.limit, l.pullData(e.curr)), l.config.pageLanguage && l.config.pageLanguage !==
						!0) {
						var t;
						if ("string" == typeof l.config.pageLanguage) {
							if (!u.config.pageLanguageText[l.config.pageLanguage]) return void console.log("找不到" + l.config.pageLanguage +
								"对应的语言文本定义");
							t = u.config.pageLanguageText[l.config.pageLanguage]
						} else {
							if ("object" != typeof l.config.pageLanguage) return;
							var i = l.config.pageLanguage.lan;
							if (!i) return;
							t = o.extend({}, u.config.pageLanguageText[i], l.config.pageLanguage.text || {})
						}
						if (!t) return;
						var n = l.layPage.find(">div");
						n.addClass(P);
						var r = n.find(".layui-laypage-skip"),
							c = r.find("input"),
							s = r.find("button");
						r.html(t.jumpTo || "jump to"), c.appendTo(r), r.append(t.page || "page"), s.html(t.go || "go").appendTo(
							r);
						var f = n.find(".layui-laypage-count"),
							y = f.text();
						f.html((t.total || "total") + " " + y.split(" ")[1] + (t.unit ? " " + t.unit : ""));
						var h = n.find(".layui-laypage-limits");
						layui.each(h.find("option"), function(e, a) {
							a = o(a);
							var i = a.text();
							a.html(i.split(" ")[0] + " " + (t.optionText || "limit each page"))
						}), n.removeClass(P)
					}
				}
			}, d.page), d.page.count = t, c.render(d.page)), void W.call(l, !0))))
	};
	var G = u.Class.prototype.setColsWidth;
	u.Class.prototype.setColsWidth = function() {
		var e = this;
		G.call(e);
		var a = e.config,
			t = (a.id, e.elem),
			i = t.find("." + D);
		if (e.elem[i.length && e.layHeader.first().find(".layui-table").width() - 1 > e.layHeader.first().width() ?
				"addClass" : "removeClass"]("layui-table-none-overflow"), a.cols.length > 1) {
			var n = a.cols.length,
				l = e.layBox.find(_),
				r = e.layFixed.find(_ + " th"),
				c = !1;
			r.each(function(e, a) {
				a = o(a);
				var t = parseInt(a.attr("rowspan") || "1");
				t < n && (a.height(l.find('th[data-key="' + a.attr("data-key") + '"]').height()), c = !0)
			}), c && e.layFixed.find(">" + _ + ' th[rowspan="' + n + '"]').height("auto")
		}
	}, o(window).resize(function() {
		s.close(h)
	}), u.Class.prototype.setInit = function(e) {
		var a = this,
			t = a.config,
			i = t.id;
		if (t.clientWidth = t.width || function() {
				var e = function(a) {
					var i, n;
					a = a || t.elem.parent(), i = a.width();
					try {
						n = "none" === a.css("display")
					} catch (l) {}
					return !a[0] || i && !n ? i : e(a.parent())
				};
				return e()
			}(), "width" === e) return t.clientWidth;
		delete u.thisTable.arrs[i], F.check(i) ? t.checkStatus && t.checkStatus["default"] && F.set(i, x, t.checkStatus[
			"default"]) : F.init(i, t.checkStatus ? t.checkStatus["default"] || [] : []), t.checkDisabled && R(t.checkDisabled
			.data) && t.checkDisabled.data.length && F.disabled(i, R(t.checkDisabled.data) ? t.checkDisabled.data : []);
		var n;
		t.colFilterRecord ? n = ie.get(i, t.colFilterRecord) : ie.clear(i);
		var l = function(e, i, o, r) {
			if (!r) return void i.splice(o, 1);
			if (r.key = e + "-" + o, r.hide = r.hide || !1, r.colspan = r.colspan || 1, r.rowspan = r.rowspan || 1, a.initOpts(
					r), r.hide = n && "normal" === r.type && r.field && "boolean" == typeof n[r.field] ? n[r.field] : r.hide, r.field ||
				r.toolbar || r.colspan && 1 !== r.colspan || j.indexOf(r.type) !== -1 ? !r[B] || r.colspan > 1 || (r[B] = !1) :
				r[B] = !0, r.colGroup || r.colspan > 1) {
				var c = 0,
					s = e + (parseInt(r.rowspan) || 1);
				layui.each(t.cols[s], function(a, i) {
					i.HAS_PARENT || c >= 1 && c == (r.colspan || 1) || (i.HAS_PARENT = !0, i.parentKey = e + "-" + o, c +=
						parseInt(i.colspan > 1 ? i.colspan : 1), l(s, t.cols[s], a, i))
				}), r.colGroup = !0
			}
		};
		layui.each(t.cols, function(e, a) {
			return e > 0 || void layui.each(a, function(t, i) {
				l(e, a, t, i)
			})
		})
	};
	var V = u.Class.prototype.reload;
	u.Class.prototype.reload = function(e) {
		var a = this;
		u.reload(a.config.id, e, !0)
	}, u.Class.prototype.addTemp = function(e, a, t, i) {
		var n = this,
			l = [],
			r = [],
			c = [],
			s = n.config,
			d = a || {};
		e = -e, n.layBody.find('tr[data-index="' + e + '"]').length || (u.cache[n.key][e] = d, n.eachCols(function(a, t) {
				var i = t.field || a,
					n = s.index + "-" + t.key,
					u = d[i];
				if (void 0 !== u && null !== u || (u = ""), !t.colGroup) {
					var f = ['<td data-field="' + i + '" data-key="' + n + '" ' + function() {
						var e = [];
						return "normal" === t.type && t.edit !== !1 && e.push('data-edit="text"'), t.align && e.push('align="' + t
							.align + '"'), t.templet && e.push('data-content="' + u + '"'), t.event && e.push('lay-event="' + t.event +
							'"'), t.style && e.push('style="' + t.style + '"'), t.minWidth && e.push('data-minwidth="' + t.minWidth +
							'"'), e.join(" ")
					}() + ' class="' + function() {
						var e = [];
						return t.hide && e.push(P), t.field || e.push("layui-table-col-special"), e.join(" ")
					}() + '">', '<div class="layui-table-cell laytable-cell-' + function() {
						return "normal" === t.type ? n : n + " laytable-cell-" + t.type
					}() + '">' + function() {
						var a = o.extend(!0, {
							LAY_INDEX: e
						}, d);
						switch (t.type) {
							case "checkbox":
							case "radio":
							case "numbers":
								return ""
						}
						return t.toolbar ? "" : C(t, u, a)
					}(), "</div></td>"].join("");
					c.push(f), t.fixed && "right" !== t.fixed && l.push(f), "right" === t.fixed && r.push(f)
				}
			}), n.layMain.find("." + D).remove(), n.elem.removeClass("layui-table-none-overflow"), n.layMain.find("tbody").append(
				'<tr class="layui-tablePlug-data-temp" data-index="' + e + '">' + c.join("") + "</tr>"), n.layFixLeft.removeClass(
				P).find("tbody").append('<tr class="layui-tablePlug-data-temp" data-index="' + e + '">' + l.join("") + "</tr>"),
			n.layFixRight.find("tbody").append('<tr class="layui-tablePlug-data-temp" data-index="' + e + '">' + r.join("") +
				"</tr>"), n.renderForm(), n.resize(), i || n.layBody.scrollTop(n.layBody[0].scrollHeight), n.layBody.find(
				'tr.layui-tablePlug-data-temp[data-index="' + e + '"]').find("td:first-child").append(
				'<div class="close_temp"></div>'), n.layFixRight.find(".close_temp").remove(), "function" == typeof t && t.call(
				n.config, n.layBody.find('tr[data-index="' + e + '"]')))
	}, u.addTemp = function(e, a, t) {
		var i = I(e);
		"function" == typeof a && (t = a, a = {}), i && i.addTemp(u.getTemp(e).numbers, a && "object" == typeof a ? a : {},
			t)
	}, u.getTemp = function(e) {
		for (var a = u.cache[e] || [], t = [], i = 1; a[-i]; i++) R(a[-i]) || t.push(a[-i]);
		return {
			data: t,
			numbers: i
		}
	}, u.cleanTemp = function(e, a) {
		var t = I(e),
			i = u.getTemp(e),
			n = u.cache[e] || [];
		if (i.data.length)
			for (var l = i.numbers, r = 1; r < l && (!n[-r] || a && -r !== a || (n[-r] = [], !a)); r++);
		o('div.layui-table-view[lay-id="' + e + '"]').removeClass("has-data-temp-warn").find(
			"tr.layui-tablePlug-data-temp[data-index" + (a ? '="' + a + '"' : "") + "]").remove(), u.resize(e), t.layBody.scrollTop(
			t.layBody[0].scrollHeight)
	}, o(document).on("click", ".layui-table-view tr.layui-table-hover.layui-tablePlug-data-temp div.close_temp",
		function(e) {
			layui.stope(e);
			var a = o(this),
				t = a.closest("tr"),
				i = t.closest(".layui-table-view").attr("lay-id");
			u.cleanTemp(i, t.data("index"))
		});
	var q = function(e, a, t, i) {
		if (i.colGroup) {
			var n = 0;
			e++, i.CHILD_COLS = [];
			var l = t + (parseInt(i.rowspan) || 1);
			layui.each(a[l], function(t, o) {
				o.PARENT_COL_INDEX || n >= 1 && n == (i.colspan || 1) || (o.PARENT_COL_INDEX = e, i.CHILD_COLS.push(o), n +=
					parseInt(o.colspan > 1 ? o.colspan : 1), q(e, a, l, o))
			})
		}
	};
	u.eachCols = function(e, a, t) {
		var i = this,
			n = i.thisTable.config[e] || {},
			l = n.cols ? i.thisTable.arrs[e] || [] : [],
			r = 0;
		t = o.extend(!0, [], t || n.cols);
		var c;
		l.length ? (console.log("命中缓存!!"), c = !0) : layui.each(t, function(a, n) {
			return a > 0 || void layui.each(n, function(n, o) {
				q(r, t, a, o), o.PARENT_COL_INDEX || (l.push(o), i.thisTable.arrs[e] = l)
			})
		});
		var s = function(e) {
			layui.each(e || l, function(e, i) {
				var n = i.key.split("-");
				return c && (i.hide = t[n[0]][n[1]].hide, i[u.config.checkName] = !1, i.width = i.width || 0), i.CHILD_COLS ?
					s(i.CHILD_COLS) : void("function" == typeof a && a(e, i))
			})
		};
		s()
	};
	var X = function() {
		var e = this,
			t = e.key,
			i = e.elem;
		u.eachCols(t, function(t, n) {
			if ("normal" === n.type) {
				var l = n.field;
				if (!l) return;
				var r = i.find('th[data-field="' + l + '"]');
				n.filter ? r.find(".layui-table-filter").length ? r.find(".layui-table-filter").removeClass("layui-active") :
					o(E.join("")).insertAfter(r.find(".layui-table-cell>span:not(.layui-inline)")).click(function(t) {
						layui.stope(t);
						var n = i.find(".layui-table-filter.layui-active");
						n.length && n[0] !== this && (n.removeClass("layui-active"), e.layBody.find("tr." + P).removeClass(P));
						var r = i.find(".layui-table-main"),
							c = [];
						layui.each(r.find('td[data-field="' + l + '"]'), function(e, a) {
							a = o(a);
							var t = a.text();
							c.indexOf(t) === -1 && c.push(t)
						});
						var d = 200,
							f = 300,
							y = o(this),
							p = a(y.find(".layui-tablePlug-icon-filter")),
							g = p.top,
							m = p.left + y.width();
						m + d > o(document).width() && (m -= d + y.width()), h = s.open({
							content: "",
							title: null,
							type: 1,
							area: d + "px",
							shade: .1,
							closeBtn: 0,
							fixed: !1,
							resize: !1,
							shadeClose: !0,
							offset: [g + "px", m + "px"],
							isOutAnim: !1,
							maxmin: !1,
							success: function(a, t) {
								a.find(".layui-layer-content").html(
									'<table id="layui-tablePlug-col-filter" lay-filter="layui-tablePlug-col-filter"></table>'), u.render({
									elem: "#layui-tablePlug-col-filter",
									data: c.map(function(a, t, i) {
										var n = {
											name: a
										};
										return n[u.config.checkName] = !e.layBody.find("tr." + P).filter(function(e, t) {
											return o(t).find('td[data-field="' + l + '"]').text() === a
										}).length, n
									}),
									page: !1,
									skin: "nob",
									even: !1,
									height: c.length > 8 ? f : null,
									size: "sm",
									style: "margin: 0;",
									cols: [
										[{
											type: "checkbox",
											width: 40
										}, {
											field: "name",
											title: '全选<span class="table-filter-opt-invert" onclick="layui.tablePlug && layui.tablePlug.tableFilterInvert(this);">反选</span>'
										}]
									]
								})
							},
							end: function() {
								y[e.layBody.find("tr." + P).length ? "addClass" : "removeClass"]("layui-active")
							}
						}), u.on("checkbox(layui-tablePlug-col-filter)", function(a) {
							"all" === a.type ? e.layBody.find("tr")[a.checked ? "removeClass" : "addClass"](P) : layui.each(e.layBody
								.first().find('tr td[data-field="' + l + '"]'),
								function(t, i) {
									if (i = o(i), i.text() === a.data.name) {
										var n = i.parent();
										e.layBody.find('tr[data-index="' + n.data("index") + '"]')[a.checked ? "removeClass" : "addClass"](P)
									}
								})
						})
					}) : r.find(".layui-table-filter").remove()
			}
		}, e.config.cols)
	};
	u.Class.prototype.reverse = function() {
		var e = this,
			a = e.config,
			t = a.reversal;
		return e.elem[t ? "addClass" : "removeClass"]("vertical"), setTimeout(function() {
			e.layTotal.css({
				top: t ? e.layTool.outerHeight() - 1 + "px" : 0
			}), e.layMain.css({
				marginLeft: t ? e.layHeader.width() + "px" : 0,
				marginRight: t && a.totalRow ? e.layTotal.width() + "px" : 0
			}), t || e.layHeader.scrollLeft(e.layMain.scrollLeft())
		}, 0), e
	}, u.Class.prototype.eachCols = function(e) {
		var a = this;
		return u.eachCols(a.config.id, e, a.config.cols), a
	}, u.thisTable.arrs = {};
	var J = u.render;
	u.render = function(e) {
		var a = this,
			t = J.call(a, e),
			i = I(t.config.id);
		return i && i.layMain || console.log("出现render过后还没有找到需要的对象或者节点的情况"), i.layMain && i.layMain.off("scroll").on(
			"scroll",
			function() {
				var e = o(this),
					a = e.scrollLeft(),
					t = e.scrollTop();
				i.layHeader.scrollLeft(a), i.layTotal.scrollLeft(a), i.layFixed.find(O + ":not(:hover)").scrollTop(t), s.close(
					i.tipsIndex)
			}), i.layFixed && i.layFixed.find(O).on("scroll", function() {
			var e = o(this);
			e.is(":hover") && (i.layFixed.find(O + ":not(:hover)").scrollTop(e.scrollTop()), i.layMain.scrollTop(e.scrollTop()))
		}), de.timer[t.config.id] && de.reset(t.config.id), m[t.config.id] = t
	};
	var U = u.reload,
		$ = function() {
			var e = ["url", "method", "where", "contentType", "headers", "parseData", "request", "response", "data", "page",
					"initSort", "autoSort", "reversal"
				],
				a = ["id", "elem", "cols", "width", "height"];
			return {
				getParams: function() {
					return o.extend(!0, [], e)
				},
				getParamsBlacklist: function() {
					return o.extend(!0, [], a)
				},
				registParams: function() {
					console.warn(
						"智能重载相关的部分已经从查询模式白名单模式修改为查询模式参数的黑名单模式，所以该方法基本是启用状态，自定义的参数如果不是会修改整个table的框子的可以不用像之前一样要注册一下加入白名单了，使用起来会更加方便一些")
				},
				registerBlacklist: function() {
					console.warn("不建议自己调用改方法将参数加入查询参数的黑名单，除非是在非常了解该功能的前提下");
					var e = this;
					layui.each(arguments, function(t, i) {
						R(i) ? e.registerBlacklist.apply(e, i) : "string" == typeof i && a.indexOf(i) === -1 && a.push(i)
					})
				}
			}
		}(),
		Q = function() {
			var e = !0;
			return {
				enable: function() {
					if (!arguments.length) return e;
					var a = arguments[0];
					"boolean" != typeof a ? f.error("如果要开启或者关闭全局的表格智能重载模式，请传入一个true/false为参数") : e = a
				}
			}
		}();
	u.reload = function(e, a, t) {
		var i = this;
		a = a || {};
		var n = Z(e),
			l = o.extend(!0, {}, Z(e), a);
		if (l.checkStatus || F.reset(e), Q.enable() && l.smartReloadModel) {
			var r = !1;
			if (!!l.page != !!n.page && (r = !0), !r) {
				var c = $.getParamsBlacklist();
				layui.each(a, function(e, a) {
					var t = c.indexOf(e);
					if (t !== -1) return r = !0
				})
			}
			if (!r) {
				var s = I(e);
				return "object" == typeof a.page && (a.page.curr && (s.page = a.page.curr), delete a.elem, delete a.jump), s.config
					.data && s.config.data.constructor === Array && delete s.config.data, t ? o.extend(s.config, a) : o.extend(!0,
						s.config, a), s.config.page || (s.page = 1), s.loading(), s.pullData(s.page), u.thisTable.call(s)
			}
		}
		if (!t) {
			var s = U.call(i, e, a);
			return m[e] = s
		}
		V.call(I(e), a), m[e].config = I(e).config
	};
	var Z = function(e) {
			return u.thisTable.config[e] || m[e] && m[e].config || {}
		},
		ee = u.checkStatus;
	u.checkStatus = function(e, a) {
		var t = this,
			i = ee.call(t, e),
			n = Z(e);
		if (n && n.checkStatus && (i.status = F.get(e), a)) {
			i.dataCache = [];
			var l = K[n.id];
			layui.each(o.extend(!0, [], F.getChecked(e)), function(e, a) {
				l[a] && i.dataCache.push(u.clearCacheKey(l[a]))
			})
		}
		if (n && n.checkDisabled) {
			var r = n.checkDisabled;
			if ("object" == typeof r && r.enabled !== !1) {
				var c = 0,
					s = 0,
					d = te(n),
					f = F.get(e, k);
				layui.each(u.cache[e], function(e, a) {
					var t = a[d];
					f.indexOf(t) === -1 && (c++, a[u.config.checkName] && s++)
				}), i.isAll = s > 0 && c === s
			}
		}
		return i
	};
	var ae = function(e, a, t, i) {
			return !F.checkDisabled(e, a) && void F.update(e, a, t, i)
		},
		te = function(e) {
			if (e.primaryKey) return e.primaryKey;
			var a = e.checkStatus && e.checkStatus.primaryKey,
				t = e.checkDisabled && e.checkDisabled.primaryKey;
			return a && t && a !== t && layui.hint().error("注意：当前表格(" + e.id +
				")中checkStatus和checkDisabled都配置了primaryKey,但是他们不是同一个字段，必须保持表格配置中主键是唯一的，建议直接设置在顶层配置中就可以了！"), t || a || "id"
		};
	u.on("checkbox", function(e) {
		var a = o(this).closest(".layui-table-view"),
			t = a.attr("lay-id"),
			i = Z(t);
		if (F.check(t)) {
			var n = e.checked,
				l = e.data,
				r = e.type,
				c = te(i);
			if ("one" === r) ae(t, l[c], n);
			else if ("all" === r) {
				var s = !1;
				layui.each(layui.table.cache[t], function(e, i) {
					var l = ae(t, i[c], n);
					if (l === !1) {
						s = !0;
						var o = F.getChecked(t).indexOf(i[c]) !== -1;
						a.find(".layui-table-body").find('tr[data-index="' + e + '"]').find('input[name="layTableCheckbox"]').prop(
							"checked", o), i[u.config.checkName] = o
					}
				}), s && d.render("checkbox", a.attr("lay-filter"))
			}
		}
	}), u.on("radio()", function(e) {
		var a = e.tr.closest(".layui-table-view"),
			t = a.attr("lay-id"),
			i = Z(t);
		if (F.check(t)) {
			var n = e.checked,
				l = e.data,
				o = te(i);
			ae(t, l[o], n, !0)
		}
	}), d.on("checkbox", function(e) {
		o(e.elem).change()
	});
	var ie = function() {
		var e = "tablePlug_col_filter_record",
			a = function(e) {
				return "local" === e ? "data" : "sessionData"
			};
		return {
			set: function(t, i, n, l) {
				if (t && i) {
					var o = a(l),
						r = this.get(t, l);
					r[i] = !n, layui[o](e, {
						key: t,
						value: r
					})
				}
			},
			get: function(t, i) {
				return layui[a(i)](e)[t] || {}
			},
			clear: function(a) {
				o.each(["data", "sessionData"], function(t, i) {
					layui[i](e, {
						key: a,
						remove: !0
					})
				})
			}
		}
	}();
	o(document).on("change", 'input[lay-filter="LAY_TABLE_TOOL_COLS"]', function(e) {
		var a = o(this),
			t = a.attr("name"),
			i = a.closest(".layui-table-view"),
			n = i.attr("lay-id"),
			l = Z(n),
			r = l.colFilterRecord;
		r ? ie.set(n, t, this.checked, r) : ie.clear(n)
	}), o(document).off("mousedown", ".layui-table-grid-down").on("mousedown", ".layui-table-grid-down", function(e) {
		u._tableTdCurr = o(this).closest("td")
	}), o(document).off("click", ".layui-table-tips-main [lay-event]").on("click", ".layui-table-tips-main [lay-event]",
		function(e) {
			var a = o(this),
				t = u._tableTdCurr;
			if (t) {
				var i = a.closest(".layui-table-tips").attr("times");
				s.close(i), u._tableTdCurr.find('[lay-event="' + a.attr("lay-event") + '"]').first().click()
			}
		}), u.on("toolbar()", function(e) {
		var a = e.config,
			t = o(this);
		a.id, a.elem.next();
		switch (e.event) {
			case "LAYTABLE_COLS":
				var i = t.find(".layui-table-tool-panel"),
					n = i.find('[lay-filter="LAY_TABLE_TOOL_COLS"]'),
					l = i.find('[lay-filter="LAY_TABLE_TOOL_COLS"]:checked');
				o(
						'<li class="layui-form" lay-filter="LAY_TABLE_TOOL_COLS_FORM"><input type="checkbox" lay-skin="primary" lay-filter="LAY_TABLE_TOOL_COLS_ALL" ' +
						(n.length === l.length ? "checked" : "") +
						' title="全选"><span class="LAY_TABLE_TOOL_COLS_Invert_Selection">反选</span></li>').insertBefore(i.find("li").first())
					.on("click", ".LAY_TABLE_TOOL_COLS_Invert_Selection", function(e) {
						layui.stope(e), i.find('[lay-filter="LAY_TABLE_TOOL_COLS"]+').click()
					}), d.render("checkbox", "LAY_TABLE_TOOL_COLS_FORM")
		}
	}), d.on("checkbox(LAY_TABLE_TOOL_COLS_ALL)", function(e) {
		o(e.elem).closest("ul").find('[lay-filter="LAY_TABLE_TOOL_COLS"]' + (e.elem.checked ? ":not(:checked)" :
			":checked") + "+").click()
	}), o(document).on("change", 'input[lay-filter="LAY_TABLE_TOOL_COLS"]', function(e) {
		var a = o(this);
		o('input[lay-filter="LAY_TABLE_TOOL_COLS_ALL"]').prop("checked", !!a.prop("checked") && !o(
			'input[lay-filter="LAY_TABLE_TOOL_COLS"]').not(":checked").length), d.render("checkbox",
			"LAY_TABLE_TOOL_COLS_FORM")
	}), o(document).on("click",
		'.layui-table-view tbody [lay-event],.layui-table-view tbody tr [name="layTableCheckbox"]+',
		function(e) {
			layui.stope(e)
		});
	var ne = function(e) {
		e = !!e, o(document).off("mouseenter", "." + L + " " + S + " " + O).off("mouseleave", "." + L + " " + S + " " + O)
			.off("mouseenter", "." + L + " " + A + " " + O).off("mouseleave", "." + L + " " + A + " " + O).off("mouseenter",
				"." + L + " " + w + " " + _), e && o(document).on("mouseenter", "." + L + " " + S + " " + O, function(e) {
				var a = o(this),
					t = a.closest(S);
				"-1px" !== t.css("right") ? t.addClass(T) : setTimeout(function() {
					"-1px" !== t.css("right") && (console.log("出现了一开始还没有打滚动条补丁的时候就触发的情况"), t.addClass(T))
				}, 50)
			}).on("mouseleave", "." + L + " " + S + " " + O, function(e) {
				o(this).closest(S).removeClass(T)
			}).on("mouseenter", "." + L + " " + A + " " + O, function(e) {
				var a = o(this),
					t = a.closest(A);
				t.addClass(T);
				var i = t.find(_).find("table").width(),
					n = t.find(_).width() + 1;
				t.css({
					width: i + "px"
				}).find(O).css({
					width: n + "px"
				})
			}).on("mouseleave", "." + L + " " + A + " " + O, function(e) {
				o(this).css({
					width: "auto"
				}).closest(A).css({
					width: "auto"
				}).removeClass(T)
			}).on("mouseenter", "." + L + " " + w + " " + _, function(e) {
				var a = o(this);
				a.closest(w).removeClass(T)
			})
	};
	ne(!0), d.on("checkbox(layTableAllChoose)", function(e) {
		var a = o(e.elem),
			t = a.closest("." + L);
		d.render("checkbox", t.attr("lay-filter"), t.find('[lay-filter="layTableAllChoose"]' + (e.elem.checked ?
			":not(:checked)" : ":checked")).prop("checked", e.elem.checked))
	}), d.on("checkbox(layTableCheckbox)", function(e) {
		var a = o(e.elem),
			t = a.closest("." + L),
			i = t.find('tr[data-index="' + a.closest("tr").data("index") + '"]');
		d.render("checkbox", t.attr("lay-filter"), i.find('[lay-filter="layTableCheckbox"]' + (e.elem.checked ?
			":not(:checked)" : ":checked")).prop("checked", e.elem.checked))
	});
	var le = function(e, a) {
			var t = this,
				i = {},
				n = t.config,
				l = t.layMain.scrollTop(),
				o = t.layMain.scrollLeft();
			return e = e >= 0 ? e : t.layBody.find("tr." + N).data("index"), i[n.response.statusName] = n.response.statusCode,
				i[n.response.msgName] = "数据更新", i[n.response.dataName] = u.cache[n.id], i[n.response.countName] = t.count || (n.page ?
					n.page.count : n.data.length), a && t.layHeader.find(".layui-table-sort[lay-sort]").attr("lay-sort", ""), t.renderData(
					i, t.page, i[n.response.countName], a), t.layBody.scrollTop(l), t.layMain.scrollLeft(o), "function" == typeof n.done &&
				n.done(i, t.page, i[n.response.countName]), e >= 0 && setTimeout(function() {
					t.setThisRowChecked(e)
				}, 0), t
		},
		oe = function(e, a, t) {
			var i = this;
			if (!a && 0 !== a || !t && 0 !== t || a < 0 || t < 0 || a === t) return i;
			var n = I(e);
			if (n) {
				var l = (n.config, u.cache[e]);
				if (!l || !l[a] || !l[t]) return i;
				l.splice(t, 0, l.splice(a, 1)[0]), le.call(n, t, !0)
			}
			return i
		},
		re = function(e, a, t) {
			var i = this;
			if (!e) return console.warn("tableId不能为空"), i;
			if (a && ("object" == typeof a || R(a)) && (t = a, a = ""), (null === a || isNaN(a)) && (a = ""), t && "object" !=
				typeof t && !R(t)) return console.warn("data格式必须是对象或者数组"), i;
			var n = I(e);
			if (n) {
				var l = u.cache[e],
					r = n.config;
				if (!t) return le.call(n), i;
				R(t) && (a = ""), "" !== a ? o.extend(!0, l[a], t) : (R(t) || (t = [t]), r.primaryKey ? layui.each(t, function(e,
					a) {
					a[r.primaryKey] && layui.each(l, function(e, t) {
						if (t[r.primaryKey] === a[r.primaryKey]) return o.extend(!0, l[e], a), !0
					})
				}) : o.extend(!0, l, t)), le.call(n)
			}
			return i
		},
		ce = function(e, a) {
			var t = this;
			if (!e) return console.warn("tableId不能为空"), t;
			if (!a) return console.warn("data不能为空"), t;
			var i = I(e);
			if (i) {
				var n = i.config;
				if (n.url) return u.reload(e), t;
				if (R(n.data)) {
					if ("object" != typeof a && !R(a)) return console.warn("data必须是对象或者数组"), t;
					R(a) || (a = [a]);
					var l = te(n);
					layui.each(a, function(e, a) {
						l && (a[l] || (a[l] = "idTemp_" + (new Date).getTime() + "_" + Math.round(1e6 * Math.random()))), n.data.push(
							a)
					}), u.reload(e)
				}
				return t
			}
		},
		se = function(e, a) {
			var t = this;
			if (!e) return console.warn("tableId不能为空"), t;
			if (!a && 0 !== a) return console.warn("data不能为空"), t;
			var i = I(e);
			if (i) {
				var n = i.config,
					l = {},
					o = i.count || (n.page ? n.page.count : n.data.length),
					r = te(n);
				if (n.url) {
					if (n.page) {
						o -= R(a) ? a.length : 1, l.page = {};
						var c = Math.ceil(o / n.page.limit);
						l.page.curr = 0 === o ? 1 : i.page > c ? c || 1 : i.page
					}
					return layui.each(a, function(a, t) {
						var i = "object" == typeof t ? t[r] : t;
						F.update(e, i, !1)
					}), u.reload(e, l), t
				}
				if (R(n.data)) {
					if ("object" == typeof a || R(a)) R(a) || (a = [a]), layui.each(a, function(a, t) {
						r && t && "object" == typeof t && !t[r] || layui.each(n.data, function(a, i) {
							if (t === i[r] || t[r] === i[r]) return n.data.splice(a, 1), F.update(e, i[r], !1), o -= 1, !0
						})
					});
					else {
						if (isNaN(a)) return t;
						var s;
						if (n.page ? a < n.page.limit && (s = n.data.splice((i.page - 1) * n.page.limit + a, 1)) : s = n.data.splice(a,
								1), !s.length) return t;
						o -= 1, F.update(e, s[0][r], !1)
					}
					if (n.page) {
						l.page = {};
						var c = Math.ceil(o / n.page.limit);
						l.page.curr = 0 === o ? 1 : i.page > c ? c || 1 : i.page
					}
					u.reload(e, l)
				}
				return t
			}
		},
		de = function(e, a) {
			var t = this,
				i = de.timer;
			if (e === !1) return layui.each(i, function(e, a) {
				de.clear(e)
			}), t;
			if (!e) return console.warn("tableId不能为空"), t;
			var n = I(e);
			if (!n) return console.warn("找不到id为", e, "的实例"), t;
			var l = n.config;
			return a === !1 ? (de.clear(e), t) : a || 0 === a ? ((a === !0 || a < 50) && (a = 50), de.clear(e), void(i[e] = {
				time: a,
				index: setInterval(function() {
					o(document).find(l.elem).length ? de(e) : de.call(t, e, !1)
				}, a)
			})) : (n.pullData(n.page, !0), t)
		};
	de.timer = {}, de.clear = function(e) {
		if (de.timer[e]) {
			clearInterval(de.timer[e].index);
			var a = de.timer[e].time;
			return delete de.timer[e], a
		}
	}, de.reset = function(e) {
		de(e, de.clear(e))
	};
	var ue = function(e, a, t) {
		var i = this;
		if (!e) return console.warn("tableId不能为空"), i;
		var n;
		if ("string" == typeof e ? n = I(e) : (n = e, e = n.key || (n.config ? n.config.id : "")), !n || !e) return console
			.warn("找不到id为", e, "的实例"), i;
		var l = n.config;
		if (!l.totalRow) return i;
		var r = n.layTotal;
		return a ? (r.find('td[data-field="' + a + '"] div.layui-table-cell').html(t || ""), i) : void u.eachCols(e,
			function(a, t) {
				if (t.totalRow && !t.totalRowText && t.field) {
					var i, n = t.field,
						c = t.totalFormat || "sum",
						s = o.extend([], u.cache[e]);
					if ("function" == typeof c) i = c.call(l, e, s, n);
					else switch (i = 0, c) {
						case "sum":
							layui.each(s, function(e, a) {
								i += parseFloat(a[n]) || 0
							})
					}
					i && r.find('td[data-field="' + n + '"] div.layui-table-cell').html(i || "")
				}
			})
	};
	o.extend(g, {
		CHECK_TYPE_ADDITIONAL: v,
		CHECK_TYPE_REMOVED: b,
		CHECK_TYPE_ORIGINAL: x,
		tableCheck: F,
		colFilterRecord: ie,
		getConfig: Z,
		getIns: function(e) {
			return m[e]
		},
		disabledCheck: function(e, a) {
			var t = this;
			F.disabled(e, a || []), H.call(t, e, !0)
		},
		dataRenderChecked: M,
		queryParams: $,
		smartReload: Q,
		tableFilterInvert: function(e) {
			e = o(e);
			var a = e.closest(".layui-table-view"),
				t = a.attr("lay-id");
			if (t) {
				var i = u.checkStatus(t);
				i.isAll ? a.find('[lay-filter="layTableAllChoose"]+').click() : a.find(
					'tbody [name="layTableCheckbox"]:checked').length ? layui.each(a.find('tbody [name="layTableCheckbox"]'),
					function(e, a) {
						o(a).next().click()
					}) : a.find('[lay-filter="layTableAllChoose"]+').click()
			}
		},
		getPosition: a,
		reverseTable: Y,
		move: oe,
		moveUp: function(e, a) {
			return oe.call(this, e, a, a - 1)
		},
		moveDown: function(e, a) {
			return oe.call(this, e, a, a + 1)
		},
		update: re,
		addData: ce,
		del: se,
		refresh: de,
		renderTotal: ue,
		enableTableFixedScroll: ne
	}), e(i, g)
});
